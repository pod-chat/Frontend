"use strict";function e(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(require("react")),t=e=>"checkbox"===e.type,n=e=>null==e;const s=e=>"object"==typeof e;var c=e=>!n(e)&&!Array.isArray(e)&&s(e)&&!(e instanceof Date),u=e=>e.filter(Boolean),i=e=>void 0===e,a=(e={},r,t)=>{const s=u(r.split(/[,[\].]+?/)).reduce((e,r)=>n(e)?e:e[r],e);return i(s)||s===e?i(e[r])?t:e[r]:s};const l="blur",o="change",f="onBlur",d="onChange",b="onSubmit",y="onTouched",g="all",h="max",m="min",v="maxLength",x="minLength",p="pattern",A="required",O="validate";var j=(e,r)=>{const t=Object.assign({},e);return delete t[r],t};const k=r.createContext(null);k.displayName="RHFContext";const V=()=>r.useContext(k);var R=(e,r,t,n,s=!0)=>e?new Proxy(r,{get:(e,r)=>{if(r in e)return t.current[r]!==g&&(t.current[r]=!s||g),n&&(n.current[r]=!0),e[r]}}):r,F=e=>c(e)&&!Object.keys(e).length,S=(e,r,t)=>F(e)||Object.keys(e).length>=Object.keys(r).length||Object.keys(e).find(e=>r[e]===(!t||g)),w="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;const _=w?"Proxy"in window:"undefined"!=typeof Proxy;function C(e){const t=V(),{formStateRef:n,formStateSubjectRef:s,readFormStateRef:c}=e&&e.control||t.control,[u,i]=r.useState(n.current),a=r.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1});return r.useEffect(()=>{const e=s.current.subscribe({next:e=>{S(e,a.current)&&i(Object.assign(Object.assign({},n.current),e))}});return()=>e.unsubscribe()},[]),R(_,u,c,a,!1)}function D({name:e,rules:n,defaultValue:s,control:u,shouldUnregister:f}){const d=V(),{defaultValuesRef:b,register:y,fieldsRef:g,unregister:h,controllerSubjectRef:m,shouldUnmountUnregister:v}=u||d.control,{onChange:x,onBlur:p,ref:A}=y(e,n),[O,j]=r.useState(i(a(g.current,e)._f.value)?i(s)?a(b.current,e):s:a(g.current,e)._f.value),k=C({control:u||d.control});return a(g.current,e)._f.value=O,r.useEffect(()=>{const r=m.current.subscribe({next:r=>(!r.name||e===r.name)&&j(a(r.values,e))});return A({target:O}),()=>{r.unsubscribe(),(v||f)&&h(e)}},[e]),{field:{onChange:r=>{const n=(e=>c(e)&&e.target?t(e.target)?e.target.checked:e.target.value:e)(r);j(n),x({target:{value:n,name:e},type:o})},onBlur:()=>{p({target:{name:e},type:l})},name:e,value:O,ref:e=>e&&A(e)},formState:k,fieldState:Object.defineProperties({},{invalid:{get:()=>!!a(k.errors,e)},isDirty:{get:()=>!!a(k.dirtyFields,e)},isTouched:{get:()=>!!a(k.touchedFields,e)},error:{get:()=>a(k.errors,e)}})}}var E=(e,r,t,n,s)=>r?Object.assign(Object.assign({},t[e]),{types:Object.assign(Object.assign({},t[e]&&t[e].types?t[e].types:{}),{[n]:s||!0})}):{},B=e=>/^\w*$/.test(e),N=e=>u(e.replace(/["|']|\]/g,"").split(/\.|\[/));function $(e,r,t){let n=-1;const s=B(r)?[r]:N(r),u=s.length,i=u-1;for(;++n<u;){const r=s[n];let u=t;if(n!==i){const t=e[r];u=c(t)||Array.isArray(t)?t:isNaN(+s[n+1])?{}:[]}e[r]=u,e=e[r]}return e}const M=(e,r,t)=>{for(const n of t||Object.keys(e)){const t=a(e,n);if(t){const e=t._f,n=j(t,"_f");if(e&&r(e.name)){if(e.ref.focus&&i(e.ref.focus()))break;if(e.refs){e.refs[0].focus();break}}else c(n)&&M(n,r)}}},I=(e,r,t={})=>{for(const n in e.current){const s=e.current[n];if(s){const e=s._f,c=j(s,"_f");$(t,n,e?e.ref.disabled||e.refs&&e.refs.every(e=>e.disabled)?void 0:e.value:Array.isArray(s)?[]:{}),c&&I({current:c},r,t[n])}}return Object.assign(Object.assign({},r),t)};var P=e=>e.substring(0,e.search(/.\d/))||e,T=()=>{const e="undefined"==typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const t=(16*Math.random()+e)%16|0;return("x"==r?t:3&t|8).toString(16)})},U=(e=[],r)=>e.map(e=>Object.assign({[r]:e&&e[r]||T()},e)),W=e=>n(e)||!s(e);function L(e,t,n){if(W(e)||W(t)||e instanceof Date||t instanceof Date)return e===t;if(!r.isValidElement(e)){const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(const s of r){const r=e[s];if(!n||"ref"!==s){const e=t[s];if((c(r)||Array.isArray(r))&&(c(e)||Array.isArray(e))?!L(r,e,n):r!==e)return!1}}}return!0}function q(e,r,t,n,s){let c=-1;for(;++c<e.length;){for(const n in e[c])Array.isArray(e[c][n])?(!t[c]&&(t[c]={}),t[c][n]=[],q(e[c][n],a(r[c]||{},n,[]),t[c][n],t[c],n)):L(a(r[c]||{},n),e[c][n])?$(t[c]||{},n):t[c]=Object.assign(Object.assign({},t[c]),{[n]:!0});n&&!t.length&&delete n[s]}return t}var H=(e,r,t)=>function e(r,t){if(W(r)||W(t))return t;for(const n in t){const s=r[n],u=t[n];try{r[n]=c(s)&&c(u)||Array.isArray(s)&&Array.isArray(u)?e(s,u):u}catch(e){}}return r}(q(e,r,t.slice(0,e.length)),q(r,e,t.slice(0,e.length)));function z(e,r){return[...e,...Array.isArray(r)?r:[r]]}var G=e=>Array.isArray(e)?Array(e.length).fill(void 0):void 0;function J(e,r,t){return[...e.slice(0,r),...Array.isArray(t)?t:[t],...e.slice(r)]}var K=(e,r,t)=>Array.isArray(e)?(i(e[t])&&(e[t]=void 0),e.splice(t,0,e.splice(r,1)[0]),e):[];function Q(e,r){return[...Array.isArray(r)?r:[r],...e]}var X=(e,r)=>i(r)?[]:function(e,r){let t=0;const n=[...e];for(const e of r)n.splice(e-t,1),t++;return u(n).length?n:[]}(e,(Array.isArray(r)?r:[r]).sort((e,r)=>e-r)),Y=(e,r,t)=>{e[r]=[e[t],e[t]=e[r]][0]},Z=e=>"boolean"==typeof e;function ee(e,r){const t=B(r)?[r]:N(r),n=1==t.length?e:function(e,r){const t=r.slice(0,-1).length;let n=0;for(;n<t;)e=i(e)?n++:e[r[n++]];return e}(e,t),s=t[t.length-1];let u;n&&delete n[s];for(let r=0;r<t.slice(0,-1).length;r++){let n,s=-1;const i=t.slice(0,-(r+1)),a=i.length-1;for(r>0&&(u=e);++s<i.length;){const r=i[s];n=n?n[r]:e[r],a===s&&(c(n)&&F(n)||Array.isArray(n)&&!n.filter(e=>c(e)&&!F(e)||Z(e)).length)&&(u?delete u[r]:delete e[r]),u=n}}return e}function re(e,r){const t={};for(const n of e){const e=a(r,n);e&&(B(n)?t[n]=e._f:$(t,n,e._f))}return t}var te=e=>"file"===e.type,ne=e=>"select-multiple"===e.type,se=e=>"radio"===e.type;const ce={value:!1,isValid:!1},ue={value:!0,isValid:!0};var ie=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!i(e[0].attributes.value)?i(e[0].value)||""===e[0].value?ue:{value:e[0].value,isValid:!0}:ue:ce}return ce};const ae={isValid:!1,value:null};var le=e=>Array.isArray(e)?e.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,ae):ae;function oe(e){if(e&&e._f){const n=e._f.ref;if(n.disabled)return;return te(n)?n.files:se(n)?le(e._f.refs).value:ne(n)?(r=n.options,[...r].filter(({selected:e})=>e).map(({value:e})=>e)):t(n)?ie(e._f.refs).value:((e,{valueAsNumber:r,valueAsDate:t,setValueAs:n})=>r?""===e?NaN:+e:t?new Date(e):n?n(e):e)(i(n.value)?e._f.ref.value:n.value,e._f)}var r}var fe=e=>e&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),de=e=>"function"==typeof e,be=e=>"string"==typeof e,ye=e=>be(e)||r.isValidElement(e),ge=e=>e instanceof RegExp;function he(e,r,t="validate"){if(ye(e)||Z(e)&&!e)return{type:t,message:ye(e)?e:"",ref:r}}var me=e=>c(e)&&!ge(e)?e:{value:e,message:""},ve=async({_f:{ref:e,refs:r,required:s,maxLength:u,minLength:i,min:a,max:l,pattern:o,validate:f,name:d,value:b,valueAsNumber:y}},g)=>{const j={},k=se(e),V=t(e),R=k||V,S=(y||te(e))&&!e.value||""===b||Array.isArray(b)&&!b.length,w=E.bind(null,d,g,j),_=(r,t,n,s=v,c=x)=>{const u=r?t:n;j[d]=Object.assign({type:r?s:c,message:u,ref:e},w(r?s:c,u))};if(s&&(!k&&!V&&(S||n(b))||Z(b)&&!b||V&&!ie(r).isValid||k&&!le(r).isValid)){const{value:t,message:n}=ye(s)?{value:!!s,message:s}:me(s);if(t&&(j[d]=Object.assign({type:A,message:n,ref:R?(r||[])[0]||{}:e},w(A,n)),!g))return j}if(!(n(a)&&n(l)||""===b)){let r,t;const s=me(l),c=me(a);if(isNaN(b)){const n=e.valueAsDate||new Date(b);be(s.value)&&(r=n>new Date(s.value)),be(c.value)&&(t=n<new Date(c.value))}else{const u=e.valueAsNumber||parseFloat(b);n(s.value)||(r=u>s.value),n(c.value)||(t=u<c.value)}if((r||t)&&(_(!!r,s.message,c.message,h,m),!g))return j}if(be(b)&&!S&&(u||i)){const e=me(u),r=me(i),t=!n(e.value)&&b.length>e.value,s=!n(r.value)&&b.length<r.value;if((t||s)&&(_(t,e.message,r.message),!g))return j}if(be(b)&&o&&!S){const{value:r,message:t}=me(o);if(ge(r)&&!b.match(r)&&(j[d]=Object.assign({type:p,message:t,ref:e},w(p,t)),!g))return j}if(f){const t=R&&r?r[0]:e;if(de(f)){const e=he(await f(b),t);if(e&&(j[d]=Object.assign(Object.assign({},e),w(O,e.message)),!g))return j}else if(c(f)){let e={};for(const[r,n]of Object.entries(f)){if(!F(e)&&!g)break;const s=he(await n(b),t,r);s&&(e=Object.assign(Object.assign({},s),w(r,s.message)),g&&(j[d]=e))}if(!F(e)&&(j[d]=Object.assign({ref:t},e),!g))return j}}return j},xe=e=>({isOnSubmit:!e||e===b,isOnBlur:e===f,isOnChange:e===d,isOnAll:e===g,isOnTouch:e===y}),pe=e=>e instanceof HTMLElement;class Ae{constructor(){this.tearDowns=[]}add(e){this.tearDowns.push(e)}unsubscribe(){for(const e of this.tearDowns)e();this.tearDowns=[]}}class Oe{constructor(e,r){this.observer=e,this.closed=!1,r.add(()=>this.closed=!0)}next(e){this.closed||this.observer.next(e)}}class je{constructor(){this.observers=[]}next(e){for(const r of this.observers)r.next(e)}subscribe(e){const r=new Ae,t=new Oe(e,r);return this.observers.push(t),r}unsubscribe(){this.observers=[]}}const ke="undefined"==typeof window;exports.Controller=e=>e.render(D(e)),exports.FormProvider=e=>r.createElement(k.Provider,{value:j(e,"children")},e.children),exports.appendErrors=E,exports.get=a,exports.set=$,exports.useController=D,exports.useFieldArray=({control:e,name:t,keyName:n="id",shouldUnregister:s})=>{const c=V(),l=r.useRef(""),{isWatchAllRef:o,watchFieldsRef:f,getIsDirty:d,watchSubjectRef:b,fieldArraySubjectRef:y,fieldArrayNamesRef:g,fieldsRef:h,defaultValuesRef:m,formStateRef:v,formStateSubjectRef:x,readFormStateRef:p,validFieldsRef:A,fieldsWithValidationRef:O,fieldArrayDefaultValuesRef:k,unregister:R,shouldUnmountUnregister:F}=e||c.control,[S,w]=r.useState(U(a(k.current,P(t))?a(k.current,t,[]):a(m.current,t,[]),n));$(k.current,t,[...S]),g.current.add(t);const _=e=>e.map(e=>j(e||{},n)),C=()=>{const e=a(I(h,m.current),t,[]);return U(a(k.current,t,[]).map((r,t)=>Object.assign(Object.assign({},r),e[t])),n)},D=(e,r)=>r?i(r.focusIndex)?r.focusName?r.focusName:r.shouldFocus?`${t}.${e}`:"":`${t}.${r.focusIndex}`:`${t}.${e}`,E=(e=[])=>w(U(e,n)),B=e=>!u(a(e,t,[])).length&&ee(e,t),N=(e,r,n=[],s=!0)=>{if(a(h.current,t)){const n=e(a(h.current,t),r.argA,r.argB);s&&$(h.current,t,n)}if(Array.isArray(a(v.current.errors,t))){const n=e(a(v.current.errors,t),r.argA,r.argB);s&&$(v.current.errors,t,n),B(v.current.errors)}if(p.current.touchedFields&&a(v.current.touchedFields,t)){const n=e(a(v.current.touchedFields,t),r.argA,r.argB);s&&$(v.current.touchedFields,t,n),B(v.current.touchedFields)}(p.current.dirtyFields||p.current.isDirty)&&($(v.current.dirtyFields,t,H(_(n),a(m.current,t,[]),a(v.current.dirtyFields,t,[]))),(e=>{e&&$(v.current.dirtyFields,t,H(_(e),a(m.current,t,[]),a(v.current.dirtyFields,t,[])))})(n),B(v.current.dirtyFields)),p.current.isValid&&($(A.current,t,e(a(A.current,t,[]),r.argA)),B(A.current),$(O.current,t,e(a(O.current,t,[]),r.argA)),B(O.current)),x.current.next({isDirty:d(t,_(n)),errors:v.current.errors,isValid:v.current.isValid})},T=(e,r=0,n="")=>e.forEach((e,s)=>!W(e)&&Object.entries(e).forEach(([e,c])=>{const u=`${n||t}.${n?s:r+s}.${e}`;Array.isArray(c)?T(c,s,u):$(h.current,u,{_f:{ref:{name:u},name:u,value:c}})}));return r.useEffect(()=>{if(o.current)x.current.next({});else for(const e of f.current)if(t.startsWith(e)){x.current.next({});break}b.current.next({name:t,value:a(I(h,m.current),t,[])}),l.current&&M(h.current,e=>e.startsWith(l.current)),l.current="",y.current.next({name:t,fields:_([...S])})},[S,t]),r.useEffect(()=>{const e=y.current.subscribe({next({name:e,fields:r,isReset:n}){n&&(e?$(k.current,e,r):k.current=r,E(a(k.current,t)))}});return!a(h.current,t)&&$(h.current,t,[]),()=>{e.unsubscribe(),(F||s)&&R(t)}},[]),{swap:r.useCallback((e,r)=>{const t=C();Y(t,e,r),N(Y,{argA:e,argB:r},t,!1),E(t)},[t]),move:r.useCallback((e,r)=>{const t=C();K(t,e,r),E(t),N(K,{argA:e,argB:r},t,!1)},[t]),prepend:r.useCallback((e,r)=>{const t=Array.isArray(e)?e:[e],n=Q(C(),t);E(n),N(Q,{argA:G(e)},n),T(t),l.current=D(0,r)},[t]),append:r.useCallback((e,r)=>{const t=Array.isArray(e)?e:[e],n=z(C(),t),s=n.length-t.length;E(n),N(z,{argA:G(e)},n,!1),T(t,s),l.current=D(s,r)},[t]),remove:r.useCallback(e=>{const r=X(C(),e);(e=>{(Array.isArray(e)?e:[e]).forEach(e=>$(h.current,`${t}${i(e)?"":"."+e}`,i(e)?[]:void 0))})(e),E(r),N(X,{argA:e},r)},[t]),insert:r.useCallback((e,r,t)=>{const n=Array.isArray(r)?r:[r],s=J(C(),e,n);E(s),N(J,{argA:e,argB:G(r)},s),T(n,e),l.current=D(e,t)},[t]),fields:S}},exports.useForm=function({mode:e=b,reValidateMode:s=d,resolver:c,context:o,defaultValues:f={},shouldFocusError:y=!0,shouldUnregister:h,criteriaMode:m}={}){const v=r.useRef({}),x=r.useRef(new Set),p=r.useRef(new je),A=r.useRef(new je),O=r.useRef(new je),k=r.useRef(new je),V=r.useRef({}),C=r.useRef(new Set),D=r.useRef(!1),E=r.useRef({}),B=r.useRef({}),N=r.useRef(f),T=r.useRef(!1),U=r.useRef(o),W=r.useRef(c),q=r.useRef(new Set),z=xe(e),G=m===g,[J,K]=r.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!z.isOnSubmit,errors:{}}),Q=r.useRef({isDirty:!_,dirtyFields:!_,touchedFields:!_,isValidating:!_,isValid:!_,errors:!_}),X=r.useRef(J);U.current=o,W.current=c;const Y=()=>X.current.isValid=L(B.current,E.current)&&F(X.current.errors),Z=r.useCallback((e,r,t=!1,s={},c,u)=>{const l=a(X.current.errors,e);let o=t||!L(l,r,!0)||Q.current.isValid&&i(r)&&a(E.current,e)&&!a(B.current,e);if(r?(ee(B.current,e),o=o||!l||!L(l,r,!0),$(X.current.errors,e,r)):((a(E.current,e)||W.current)&&($(B.current,e,!0),o=o||l),ee(X.current.errors,e)),o&&!n(t)||!F(s)||u){const e=Object.assign(Object.assign({},s),{isValid:W.current?!!c:Y(),errors:X.current.errors});X.current=Object.assign(Object.assign({},X.current),e),p.current.next(u?{}:e)}p.current.next({isValidating:!1})},[]),ce=r.useCallback((e,r,s={},c,u)=>{u&&_e(e);const i=a(v.current,e,{})._f;if(i){const u=w&&pe(i.ref)&&n(r)?"":r;if(i.value=r,se(i.ref)?(i.refs||[]).forEach(e=>e.checked=e.value===u):te(i.ref)&&!be(u)?i.ref.files=u:ne(i.ref)?[...i.ref.options].forEach(e=>e.selected=u.includes(e.value)):t(i.ref)&&i.refs?i.refs.length>1?i.refs.forEach(e=>e.checked=Array.isArray(u)?!!u.find(r=>r===e.value):u===e.value):i.refs[0].checked=!!u:i.ref.value=u,c){const t=I(v);$(t,e,r),O.current.next({values:Object.assign(Object.assign({},N.current),t),name:e})}s.shouldDirty&&ie(e,u),s.shouldValidate&&ge(e)}},[]),ue=r.useCallback((e,r)=>{const t=I(v);return e&&r&&$(t,e,r),!L(t,N.current)},[]),ie=r.useCallback((e,r,t=!0)=>{if(Q.current.isDirty||Q.current.dirtyFields){const n=!L(a(N.current,e),r),s=a(X.current.dirtyFields,e),c=X.current.isDirty;n?$(X.current.dirtyFields,e,!0):ee(X.current.dirtyFields,e),X.current.isDirty=ue();const u={isDirty:X.current.isDirty,dirtyFields:X.current.dirtyFields},i=Q.current.isDirty&&c!==u.isDirty||Q.current.dirtyFields&&s!==a(X.current.dirtyFields,e);return i&&t&&p.current.next(u),i?u:{}}return{}},[]),ae=r.useCallback(async(e,r)=>{const t=(await ve(a(v.current,e),G))[e];return Z(e,t,r),i(t)},[G]),le=r.useCallback(async(e,r=[])=>{const{errors:t}=await W.current(I(v,h?{}:N.current),U.current,{criteriaMode:m,names:r,fields:re(x.current,v.current)});for(const r of e){const e=a(t,r);e?$(X.current.errors,r,e):ee(X.current.errors,r)}return t},[m]),ye=async e=>{for(const r in e){const t=e[r];if(t){const e=t._f,r=j(t,"_f");if(e){const r=await ve(t,G);r[e.name]?($(X.current.errors,e.name,r[e.name]),ee(B.current,e.name)):a(E.current,e.name)&&($(B.current,e.name,!0),ee(X.current.errors,e.name))}r&&await ye(r)}}},ge=r.useCallback(async e=>{const r=i(e)?Object.keys(v.current):Array.isArray(e)?e:[e];let t;return p.current.next({isValidating:!0}),t=W.current?F(await le(r,i(e)?void 0:r)):!!(i(e)?await ye(v.current):(await Promise.all(r.filter(e=>a(v.current,e)).map(async e=>await ae(e,null)))).every(Boolean)),p.current.next({errors:X.current.errors,isValidating:!1,isValid:W.current?t:Y()}),t},[le,ae]),he=r.useCallback((e,r,t)=>Object.entries(r).forEach(([r,n])=>{const s=`${e}.${r}`,c=a(v.current,s);c&&!c._f?he(s,n,t):ce(s,n,t,!0,!c)}),[ge]),me=e=>T.current||C.current.has(e)||C.current.has((e.match(/\w+/)||[])[0]),Ae=(e,r,t,n)=>{const s=a(v.current,e),c=i(s._f.value)?a(N.current,e):s._f.value;return s&&!i(c)&&(t&&t.defaultChecked?s._f.value=oe(s):q.current.size&&[...q.current].find(r=>e.startsWith(r))?s._f.value=c:ce(e,c)),(!i(c)||n)&&fe(r)&&!z.isOnSubmit&&s&&Q.current.isValid&&ve(s,G).then(r=>{F(r)?$(B.current,e,!0):ee(B.current,e),X.current.isValid!==Y()&&K(Object.assign(Object.assign({},X.current),{isValid:Y()}))}),c},Oe=r.useCallback(async({type:e,target:r,target:{value:n,type:c}})=>{let u,o,f=r.name;const d=a(v.current,f);if(d){let b=c?oe(d):void 0;b=i(b)?n:b;const y=e===l,{isOnBlur:g,isOnChange:x}=xe(s),O=!fe(d._f)&&!W.current&&!a(X.current.errors,f)||(({isOnBlur:e,isOnChange:r,isOnTouch:t,isTouched:n,isReValidateOnBlur:s,isReValidateOnChange:c,isBlurEvent:u,isSubmitted:i,isOnAll:a})=>!a&&(!i&&t?!(n||u):(i?s:e)?!u:!(i?c:r)||u))(Object.assign({isBlurEvent:y,isTouched:!!a(X.current.touchedFields,f),isSubmitted:X.current.isSubmitted,isReValidateOnBlur:g,isReValidateOnChange:x},z)),j=!y&&me(f);i(b)||(d._f.value=b);const k=ie(f,d._f.value,!1);y&&!a(X.current.touchedFields,f)&&($(X.current.touchedFields,f,!0),Q.current.touchedFields&&(k.touchedFields=X.current.touchedFields));let V=!F(k)||j;if(O)return!y&&A.current.next({name:f,type:e,value:b}),V&&p.current.next(j?{}:k);if(p.current.next({isValidating:!0}),W.current){const{errors:e}=await W.current(I(v,h?{}:N.current),U.current,{criteriaMode:m,fields:re([f],v.current),names:[f]}),n=X.current.isValid;if(u=a(e,f),t(r)&&!u){const r=P(f),t=a(e,r,{});t.type&&t.message&&(u=t),(t||a(X.current.errors,r))&&(f=r)}o=F(e),n!==o&&(V=!0)}else u=(await ve(d,G))[f];!y&&A.current.next({name:f,type:e,value:b}),Z(f,u,V,k,o,j)}},[]),Ve=e=>{const r=D.current?I(v,h?{}:N.current):N.current;return i(e)?r:be(e)?a(r,e):e.map(e=>a(r,e))},Re=r.useCallback(async(e={})=>{const r=X.current.isValid;if(c){const{errors:r}=await W.current(Object.assign(Object.assign({},I(v,h?{}:N.current)),e),U.current,{criteriaMode:m,fields:re(x.current,v.current)});X.current.isValid=F(r)}else Y();r!==X.current.isValid&&p.current.next({isValid:X.current.isValid})},[m]),Fe=r.useCallback((e,r,t)=>{const n=Array.isArray(e),s=D.current?Ve():i(r)?N.current:n?r||{}:{[e]:r};if(i(e))return t&&(T.current=!0),s;const c=[];for(const r of n?e:[e])t&&C.current.add(r),c.push(a(s,r));return n?c:c[0]},[]),Se=(e,r={},t)=>{for(const n of e?Array.isArray(e)?e:[e]:Object.keys(x.current))x.current.delete(n),q.current.delete(n),a(v.current,n)&&(r.keepIsValid||(ee(E.current,n),ee(B.current,n)),!r.keepError&&ee(X.current.errors,n),!r.keepValue&&ee(v.current,n),!r.keepDirty&&ee(X.current.dirtyFields,n),!r.keepTouched&&ee(X.current.touchedFields,n),(!h||t)&&!r.keepDefaultValue&&ee(N.current,n),t&&A.current.next({name:n}));t&&(p.current.next(Object.assign(Object.assign(Object.assign({},X.current),r.keepDirty?{isDirty:ue()}:{}),W.current?{}:{isValid:Y()})),!r.keepIsValid&&Re())},we=(e,r,n)=>{_e(e);let s=a(v.current,e);const c=(e=>se(e)||t(e))(r);if(r===s._f.ref||w&&pe(s._f.ref)&&!pe(r)||c&&Array.isArray(s._f.refs)&&u(s._f.refs).find(e=>e===r))return;s={_f:c?Object.assign(Object.assign({},s._f),{refs:[...u(s._f.refs||[]).filter(e=>pe(e)&&document.contains(e)),r],ref:{type:r.type,name:e}}):Object.assign(Object.assign({},s._f),{ref:r})},$(v.current,e,s);const l=Ae(e,n,r,!0);(c&&Array.isArray(l)?!L(a(v.current,e)._f.value,l):i(a(v.current,e)._f.value))&&(a(v.current,e)._f.value=oe(a(v.current,e)))},_e=r.useCallback((e,r)=>{const t=!a(v.current,e);return $(v.current,e,{_f:Object.assign(Object.assign(Object.assign({},t?{ref:{name:e}}:Object.assign({ref:(a(v.current,e)._f||{}).ref},a(v.current,e)._f)),{name:e}),r)}),fe(r)&&$(E.current,e,!0),x.current.add(e),t&&Ae(e,r),ke?{name:e}:{name:e,onChange:Oe,onBlur:Oe,ref:t=>t?we(e,t,r):(h||r&&r.shouldUnregister)&&Se(e)}},[N.current]),Ce=r.useCallback((e,r)=>async t=>{t&&(t.preventDefault&&t.preventDefault(),t.persist&&t.persist());let n=Object.assign(Object.assign({},h?{}:N.current),I(v));p.current.next({isSubmitting:!0});try{if(W.current){const{errors:e,values:r}=await W.current(n,U.current,{criteriaMode:m,fields:re(x.current,v.current)});X.current.errors=e,n=r}else await ye(v.current);F(X.current.errors)&&Object.keys(X.current.errors).every(e=>a(n,e))?(p.current.next({errors:{},isSubmitting:!0}),await e(n,t)):(r&&await r(X.current.errors,t),y&&M(v.current,e=>a(X.current.errors,e),x.current))}finally{X.current.isSubmitted=!0,p.current.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:F(X.current.errors),submitCount:X.current.submitCount+1,errors:X.current.errors})}},[y,G,m]),De=r.useCallback(({keepErrors:e,keepDirty:r,keepIsSubmitted:t,keepTouched:n,keepDefaultValues:s,keepIsValid:c,keepSubmitCount:u},i)=>{c||(B.current={},E.current={}),C.current=new Set,T.current=!1,p.current.next({submitCount:u?X.current.submitCount:0,isDirty:r?X.current.isDirty:!!s&&L(i,N.current),isSubmitted:!!t&&X.current.isSubmitted,isValid:c?X.current.isValid:!!Re(i),dirtyFields:r?X.current.dirtyFields:{},touchedFields:n?X.current.touchedFields:{},errors:e?X.current.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},[]);return r.useEffect(()=>{const e=p.current.subscribe({next(e={}){S(e,Q.current,!0)&&(X.current=Object.assign(Object.assign({},X.current),e),K(X.current))}}),r=k.current.subscribe({next(e){if(e.fields&&e.name&&Q.current.isValid){const r=I(v);$(r,e.name,e.fields),Re(r)}}});return W.current&&Q.current.isValid&&Re(),()=>{A.current.unsubscribe(),e.unsubscribe(),r.unsubscribe()}},[]),r.useEffect(()=>{D.current=!0}),{control:r.useMemo(()=>({register:_e,isWatchAllRef:T,watchFieldsRef:C,getIsDirty:ue,formStateSubjectRef:p,fieldArraySubjectRef:k,controllerSubjectRef:O,watchSubjectRef:A,watchInternal:Fe,fieldsRef:v,validFieldsRef:B,fieldsWithValidationRef:E,fieldArrayNamesRef:q,readFormStateRef:Q,formStateRef:X,defaultValuesRef:N,fieldArrayDefaultValuesRef:V,unregister:Se,shouldUnmountUnregister:h}),[]),formState:R(_,J,Q),trigger:ge,register:_e,handleSubmit:Ce,watch:r.useCallback((e,r)=>de(e)?A.current.subscribe({next:t=>e(Fe(void 0,r),t)}):Fe(e,r,!0),[]),setValue:r.useCallback((e,r,t={})=>{const n=a(v.current,e),s=q.current.has(e);s&&(k.current.next({fields:r,name:e,isReset:!0}),(Q.current.isDirty||Q.current.dirtyFields)&&t.shouldDirty&&($(X.current.dirtyFields,e,H(r,a(N.current,e,[]),a(X.current.dirtyFields,e,[]))),p.current.next({dirtyFields:X.current.dirtyFields,isDirty:ue(e,r)})),!r.length&&$(v.current,e,[])&&$(V.current,e,[])),n&&!n._f||s?he(e,r,s?{}:t):ce(e,r,t,!0,!n),me(e)&&p.current.next({}),A.current.next({name:e,value:r})},[he]),getValues:r.useCallback(Ve,[]),reset:r.useCallback((e,r={})=>{const t=e||N.current;if(w&&!r.keepValues)for(const e of x.current){const r=a(v.current,e);if(r&&r._f){const e=Array.isArray(r._f.refs)?r._f.refs[0]:r._f.ref;if(pe(e))try{e.closest("form").reset();break}catch(e){}}}!r.keepDefaultValues&&(N.current=Object.assign({},t)),r.keepValues||(v.current={},O.current.next({values:Object.assign({},t)}),A.current.next({value:Object.assign({},t)}),k.current.next({fields:Object.assign({},t),isReset:!0})),De(r,e),D.current=!1},[]),clearErrors:r.useCallback(e=>{e&&(Array.isArray(e)?e:[e]).forEach(e=>ee(X.current.errors,e)),p.current.next({errors:e?X.current.errors:{}})},[]),unregister:r.useCallback((e,r={})=>Se(e,r,!0),[]),setError:r.useCallback((e,r,t)=>{const n=((a(v.current,e)||{_f:{}})._f||{}).ref;$(X.current.errors,e,Object.assign(Object.assign({},r),{ref:n})),p.current.next({errors:X.current.errors,isValid:!1}),t&&t.shouldFocus&&n&&n.focus&&n.focus()},[]),setFocus:r.useCallback(e=>a(v.current,e)._f.ref.focus(),[])}},exports.useFormContext=V,exports.useFormState=C,exports.useWatch=function(e){const{control:t,name:n,defaultValue:s}=e||{},c=V(),u=r.useRef(n);u.current=n;const{watchInternal:a,watchSubjectRef:l}=t||c.control,[o,f]=r.useState(i(s)?a(n):s);return r.useEffect(()=>{a(n);const e=l.current.subscribe({next:({name:e,value:r})=>(!u.current||!e||(Array.isArray(u.current)?u.current:[u.current]).some(r=>e&&r&&(r.startsWith(e)||e.startsWith(r))))&&f(be(e)&&u.current===e&&!i(r)?r:a(u.current,s))});return()=>e.unsubscribe()},[]),o};
//# sourceMappingURL=index.cjs.js.map
